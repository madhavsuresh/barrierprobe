
//TODO: change pause in 
//test2,3 to register->register instruction
void barrier_sleep(uint64_t approx_time) {
    if (approx_time < 500) {
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
    } else if (approx_time < 2000) {
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
    }

}

void test3(void * x) {
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
}

void test2(void * x) {
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
        asm volatile ("pause");
}

void test(void * x) {
    printf("testing \n");
}

